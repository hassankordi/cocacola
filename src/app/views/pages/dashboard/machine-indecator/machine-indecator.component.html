<!-- Header of DashBord (filter) -->

<div class="row">
  <div class="col-xl-12 stretch-card">
    <div class="card">
      <div class="card-body p-2">
        <form class="row" #formVal="ngForm">
          <div class="col-md-2 d-flex">
            <mat-form-field class="w-100" [appearance]="'outline'">
              <mat-label>Factory</mat-label>
              <mat-select [(ngModel)]="selectedLocation" name="plant">
                <mat-option [value]="null"></mat-option>
                <mat-option *ngFor="let elem of location" [value]="elem.name"
                  (click)="selectLocation(elem)">
                  {{ elem.location }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="col-md-2 d-flex">
            <mat-form-field class="w-100" [appearance]="'outline'">
              <mat-label>All Lines</mat-label>
              <mat-select [(ngModel)]="selectedLine" name="line">
                <mat-option [value]="null"></mat-option>

                <mat-option *ngFor="let elem of allLines" (click)="selectLine(elem)" [value]="elem.name">
                  {{ elem.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-2 d-flex">
            <mat-form-field class="w-100" [appearance]="'outline'">
              <mat-label>Machines</mat-label>
              <mat-select [disabled]="!openMachineSelect" [(ngModel)]="selectedMachine" name="machine">
                <mat-option  (click)="selectMachine()" [value]="null"></mat-option>
                <mat-option *ngFor="let elem of allMachines" (click)="selectMachine()" [value]="elem.plcName">
                  {{ elem.plcName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        
          <div class="col-md-2 d-flex">

            
            <input [disabled]="!openDuration" (dateTimeChange)="durationStatus($event)" class="w-100 form-control h-75 rounded"
             placeholder="Duration"  [owlDateTimeTrigger]="dt12" [owlDateTime]="dt12" [selectMode]="'range'">
            <owl-date-time [disabled]="!openDuration" #dt12></owl-date-time>
          </div>
        
          <div class="col-md-2">
            <button class="btn btn-outline-danger" [disabled]="!openDialogBtn" (click)="filter($event)">
              Search
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>





<div class="row justify-content-center">

  <div class="col-xl-12 pr-0 py-2 stretch-card">
    <div class="card">
      <div class="card-body">
        <h6 class="card-title">
          <!-- status-ball -->
          <span [class]="machineCurrentState ==1?'status-green':'status-gray'">â€¢</span> {{machineindicator.machineID}}
        </h6>


        <!-- this row is for two progress bars and the three btns  -->
        <div class="row align-items-center">
          <div class="col-xl-8 row">
            <div class="col-md-6">
              <div class="row justify-content-center align-items-center">
                <!-- role="progressbar"
                style="--value:{{ totalDashboardInfoObj?.sle * 100 | number }}" -->
               
                <div role="progressbar"   style="--value:{{ machineindicator?.oee * 100  | number }}" class="progressbar-circle">
                   <small
                  >{{ machineindicator?.oee * 100 | number: "1.0-0" }} %</small
                > 
                  <!-- <small>{{machineindicator.oee}}</small> -->
                </div>
              </div>
              <div class="text-center pt-4 font-weight-bold" id="kpiDiv">
                SLE
              </div>
            </div>
            <div class="col-md-6">
              <div class="row justify-content-center align-items-center">
                <!-- style="--value:{{ totalDashboardInfoObj?.sle * 100 | number }}" -->
                <div role="progressbar" class="progressbar-circle">
                  <small
                  >{{ machineindicator?.avalability * 100 | number: "1.0-0" }} %</small
                >
                  <!-- <small>{{machineindicator.avalability}}</small> -->
                </div>
              </div>
              <div class="text-center pt-4 font-weight-bold" id="kpiDiv">
                Availability
              </div>
            </div>
          </div>
          <div class="col-xl-4 d-flex flex-column justify-content-center">
            <button class="m-2" mat-raised-button color="warn">Current Status {{machineCurrentStatus}}</button>
            <button class="m-2" mat-raised-button color="warn">warn</button>
            <button class="m-2" mat-raised-button color="warn">warn</button>

          </div>

        </div>




        <div class="row mt-5">
          <div class="col-md-6">
            <div class="progress">
              <div class="progress-bar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">35%
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-6 text-center">
                <span>actually</span>
                <button class="m-2 w-100" mat-raised-button color="warn">{{machineindicator.productionOutput}} Bottle</button>
              </div>
              <div class="col-6 text-center">
                <span>expected</span>
                <button class="m-2 w-100" mat-raised-button color="warn">{{machineindicator.expected}} Bottle</button>
              </div>
            </div>
          </div>
        </div>



      </div>
    </div>
  </div>

</div>


<!-- Time line data  -->
<div class="row">
  <div class="col-12" id="history-chart" *ngIf="line1Data.data.length != 0">
    <div class="row">
      <div class="col-1 h-5 text-center time-line-full-title1">
        <p style="
          margin-top: 42px;
          font-weight: bold;
          font-size: 16px;
          color: grey;
        ">
          Line 1
        </p>
      </div>
      <div class="col-11" style="height: 60px">
        <apx-chart [series]="line1Timeline.series" [chart]="line1Timeline.chart" [fill]="line1Timeline.fill"
          [grid]="line1Timeline.grid" [dataLabels]="line1Timeline.dataLabels" [plotOptions]="line1Timeline.plotOptions"
          [xaxis]="line1Timeline.xaxis" [yaxis]="line1Timeline.yaxis" [tooltip]="line1Timeline?.tooltip"
          [legend]="line1Timeline?.legend" [title]="line1Timeline?.title"></apx-chart>
      </div>
    </div>
  </div>
</div>